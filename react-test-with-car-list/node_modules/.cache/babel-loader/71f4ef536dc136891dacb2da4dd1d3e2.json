{"ast":null,"code":"var _jsxFileName = \"/Users/donghyun/Desktop/lewns2/src/pages/CarListPage/CarListPage.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Products from './Products';\nimport CarDetail from './CarDetail';\nimport Container from '../../components/Container';\nimport Top from '../../components/Top';\nimport Top2 from '../../components/Top2';\nimport Carousel from '../../components/Carousel';\nimport Modal from '../../components/Modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = `http://localhost:8080/carClasses`;\n\nconst CarListPage = () => {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const [offset, setOffset] = useState(1);\n  const [maxPage, setMaxPage] = useState(0);\n  const [isVisible, isSetVisible] = useState(true);\n  /* 캐로셀 데이터 */\n\n  const carouselRef = useRef();\n  const [carouselCurrentPosition, setCarouselCurrentPosition] = useState();\n  const [loop, setLoop] = useState(0);\n  const [carouselSize, setCarouselSize] = useState();\n  const [carouselWidth, setCarouselWidth] = useState();\n  const [oneWidth, setOneWidth] = useState();\n  /* 모달 */\n\n  const modalRef = useRef();\n  const [showModal, setShowModal] = useState(0);\n  useEffect(() => {\n    if (!showModal) {\n      modalRef.current.style = 'display:none';\n    } else {\n      modalRef.current.style = 'display:flex';\n    }\n  }, [showModal]);\n  /* 페이지 렌더링 시, 최초 요청 */\n\n  useEffect(() => {\n    loadItems();\n  }, []);\n  /* 모든 차량 조회 시, 더보기 버튼 숨기기 */\n\n  useEffect(() => {\n    if (offset === maxPage) {\n      isSetVisible(false);\n    }\n  }, [offset, maxPage]);\n  /* 캐로셀 전체 길이, 한 상품의 길이, 초기 시작 위치 설정 */\n\n  useEffect(() => {\n    setCarouselWidth(carouselRef.current.clientWidth);\n    setOneWidth(carouselWidth / 2);\n    setCarouselCurrentPosition(oneWidth / 2);\n  }, [carouselWidth, carouselSize]);\n  /* 특가 차량 무한 캐로셀 로직 : ( 절반 - 한개 - 절반 ) \n    - 1개의 길이 : 캐로셀 전체 길이 / 캐로셀 갯수\n    - 시작점 : 1개의 길이 / 2;\n    - 이동 거리 : 1개의 길이 만큼 translate(-${carouselCurrentPosition}px)\n    - 무한 스크롤을 위해 리스트 추가 한 뒤, 슬라이더 바꿔치기 (마지막 슬라이더 -> 첫번째 슬라이더) : transition-timing-function: step-end 속성을 활용\n  */\n\n  useEffect(() => {\n    if (typeof carouselCurrentPosition == 'undefined') {\n      carouselRef.current.style = 'transition-timing-function: step-end; transform : translate(-105px)';\n      setCarouselCurrentPosition(oneWidth / 2);\n    } else {\n      carouselRef.current.style = `transform : translate(-${carouselCurrentPosition}px)`;\n    }\n\n    const caroulselLoop = setTimeout(() => {\n      setCarouselCurrentPosition(prev => {\n        if (prev <= oneWidth * carouselSize) {\n          return prev + oneWidth;\n        } else return;\n      });\n    }, 1000);\n    setLoop(caroulselLoop);\n    return clearTimeout(loop);\n  }, [carouselCurrentPosition]);\n\n  const loadItems = async () => {\n    try {\n      let res = await axios.get(url);\n      setItems(res.data);\n      setMaxPage(Math.ceil(res.data.length / 5));\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Top, {\n      \"data-testid\": \"page-title\",\n      children: \"\\uCC28\\uB7C9 \\uB9AC\\uC2A4\\uD2B8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Top2, {\n      children: \"\\uD2B9\\uAC00 \\uCC28\\uB7C9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Carousel.NonScroll, {\n      children: /*#__PURE__*/_jsxDEV(Carousel.CarouselContainer, {\n        ref: carouselRef,\n        children: /*#__PURE__*/_jsxDEV(Carousel.CarouselInner, {\n          children: /*#__PURE__*/_jsxDEV(Products, {\n            items: items,\n            offset: offset,\n            type: \"specialPriceList\",\n            oneWidth: oneWidth,\n            setCarouselSize: setCarouselSize,\n            carouselWidth: carouselWidth\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Top2, {\n      children: \"\\uBAA8\\uB4E0 \\uCC28\\uB7C9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Products, {\n        items: items,\n        offset: offset,\n        type: \"allList\",\n        setShowModal: setShowModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      \"data-testid\": \"more-button\",\n      style: {\n        display: isVisible ? '' : 'none'\n      },\n      onClick: () => setOffset(offset => offset + 1),\n      children: \"\\uB354\\uBCF4\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: modalRef,\n      children: /*#__PURE__*/_jsxDEV(ModalFrame, {\n        setShowModal: setShowModal,\n        children: /*#__PURE__*/_jsxDEV(CarDetail, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CarListPage, \"qJIbQ1CkwxGon0Qc0GDJK2tW1N0=\");\n\n_c = CarListPage;\nexport default CarListPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CarListPage\");","map":{"version":3,"names":["useState","useEffect","useRef","axios","Products","CarDetail","Container","Top","Top2","Carousel","Modal","url","CarListPage","items","setItems","offset","setOffset","maxPage","setMaxPage","isVisible","isSetVisible","carouselRef","carouselCurrentPosition","setCarouselCurrentPosition","loop","setLoop","carouselSize","setCarouselSize","carouselWidth","setCarouselWidth","oneWidth","setOneWidth","modalRef","showModal","setShowModal","current","style","loadItems","clientWidth","caroulselLoop","setTimeout","prev","clearTimeout","res","get","data","Math","ceil","length","err","alert","display"],"sources":["/Users/donghyun/Desktop/lewns2/src/pages/CarListPage/CarListPage.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Products from './Products';\nimport CarDetail from './CarDetail';\n\nimport Container from '../../components/Container';\nimport Top from '../../components/Top';\nimport Top2 from '../../components/Top2';\nimport Carousel from '../../components/Carousel';\nimport Modal from '../../components/Modal';\n\nconst url = `http://localhost:8080/carClasses`;\n\nconst CarListPage = () => {\n  const [items, setItems] = useState([]);\n  const [offset, setOffset] = useState(1);\n  const [maxPage, setMaxPage] = useState(0);\n  const [isVisible, isSetVisible] = useState(true);\n\n  /* 캐로셀 데이터 */\n  const carouselRef = useRef();\n  const [carouselCurrentPosition, setCarouselCurrentPosition] = useState();\n  const [loop, setLoop] = useState(0);\n  const [carouselSize, setCarouselSize] = useState();\n  const [carouselWidth, setCarouselWidth] = useState();\n  const [oneWidth, setOneWidth] = useState();\n\n  /* 모달 */\n  const modalRef = useRef();\n  const [showModal, setShowModal] = useState(0);\n\n  useEffect(() => {\n    if (!showModal) {\n      modalRef.current.style = 'display:none';\n    } else {\n      modalRef.current.style = 'display:flex';\n    }\n  }, [showModal]);\n\n  /* 페이지 렌더링 시, 최초 요청 */\n  useEffect(() => {\n    loadItems();\n  }, []);\n\n  /* 모든 차량 조회 시, 더보기 버튼 숨기기 */\n  useEffect(() => {\n    if (offset === maxPage) {\n      isSetVisible(false);\n    }\n  }, [offset, maxPage]);\n\n  /* 캐로셀 전체 길이, 한 상품의 길이, 초기 시작 위치 설정 */\n  useEffect(() => {\n    setCarouselWidth(carouselRef.current.clientWidth);\n    setOneWidth(carouselWidth / 2);\n    setCarouselCurrentPosition(oneWidth / 2);\n  }, [carouselWidth, carouselSize]);\n\n  /* 특가 차량 무한 캐로셀 로직 : ( 절반 - 한개 - 절반 ) \n    - 1개의 길이 : 캐로셀 전체 길이 / 캐로셀 갯수\n    - 시작점 : 1개의 길이 / 2;\n    - 이동 거리 : 1개의 길이 만큼 translate(-${carouselCurrentPosition}px)\n    - 무한 스크롤을 위해 리스트 추가 한 뒤, 슬라이더 바꿔치기 (마지막 슬라이더 -> 첫번째 슬라이더) : transition-timing-function: step-end 속성을 활용\n  */\n\n  useEffect(() => {\n    if (typeof carouselCurrentPosition == 'undefined') {\n      carouselRef.current.style =\n        'transition-timing-function: step-end; transform : translate(-105px)';\n      setCarouselCurrentPosition(oneWidth / 2);\n    } else {\n      carouselRef.current.style = `transform : translate(-${carouselCurrentPosition}px)`;\n    }\n\n    const caroulselLoop = setTimeout(() => {\n      setCarouselCurrentPosition((prev) => {\n        if (prev <= oneWidth * carouselSize) {\n          return prev + oneWidth;\n        } else return;\n      });\n    }, 1000);\n\n    setLoop(caroulselLoop);\n    return clearTimeout(loop);\n  }, [carouselCurrentPosition]);\n\n  const loadItems = async () => {\n    try {\n      let res = await axios.get(url);\n      setItems(res.data);\n      setMaxPage(Math.ceil(res.data.length / 5));\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  return (\n    <Container>\n      <Top data-testid=\"page-title\">차량 리스트</Top>\n\n      {/* 차량 캐로셀 */}\n      <Top2>특가 차량</Top2>\n      <Carousel.NonScroll>\n        <Carousel.CarouselContainer ref={carouselRef}>\n          <Carousel.CarouselInner>\n            <Products\n              items={items}\n              offset={offset}\n              type=\"specialPriceList\"\n              oneWidth={oneWidth}\n              setCarouselSize={setCarouselSize}\n              carouselWidth={carouselWidth}\n            />\n          </Carousel.CarouselInner>\n        </Carousel.CarouselContainer>\n      </Carousel.NonScroll>\n\n      {/* 차량 리스트 */}\n      <Top2>모든 차량</Top2>\n      <div>\n        <Products items={items} offset={offset} type=\"allList\" setShowModal={setShowModal} />\n      </div>\n\n      <button\n        data-testid=\"more-button\"\n        style={{ display: isVisible ? '' : 'none' }}\n        onClick={() => setOffset((offset) => offset + 1)}>\n        더보기\n      </button>\n\n      {/* 차량 상세 모달 */}\n      <div ref={modalRef}>\n        <ModalFrame setShowModal={setShowModal}>\n          <CarDetail />\n        </ModalFrame>\n      </div>\n    </Container>\n  );\n};\nexport default CarListPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}