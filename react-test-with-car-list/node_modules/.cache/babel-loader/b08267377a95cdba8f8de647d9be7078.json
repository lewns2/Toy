{"ast":null,"code":"var _jsxFileName = \"/Users/donghyun/Desktop/lewns2/src/pages/CarListPage/CarListPage.jsx\",\n    _s = $RefreshSig$();\n\nimport Products from './Products';\nimport { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Container from '../../components/Container';\nimport Top from '../../components/Top';\nimport Top2 from '../../components/Top2';\nimport CarouselWrapper from '../../components/CarouselWrapper';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = `http://localhost:8080/carClasses`;\n\nconst CarListPage = () => {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const [offset, setOffset] = useState(1);\n  const [maxPage, setMaxPage] = useState(0);\n  const [isVisible, isSetVisible] = useState(true);\n  /* 페이지 렌더링 시, 최초 요청 */\n\n  useEffect(() => {\n    loadItems();\n  }, []);\n  /* 모든 차량 조회 시, 더보기 버튼 숨기기 */\n\n  useEffect(() => {\n    if (offset === maxPage) {\n      isSetVisible(false);\n    }\n  }, [offset, maxPage]);\n  const carousel = useRef();\n  const [carouselCurrentPosition, setCarouselCurrentPosition] = useState(0);\n  const [loop, setLoop] = useState(0);\n  /* 캐로셀 */\n\n  useEffect(() => {\n    carousel.current.style.width = `420vw`;\n    const carouselLoop = setTimeout(() => {\n      setCarouselCurrentPosition(prev => {\n        if (prev < 6 - 1) {\n          return prev + 1;\n        } else return 0;\n      });\n    }, 2000);\n    setLoop(carouselLoop);\n    return clearTimeout(0);\n  }, [carouselCurrentPosition]);\n\n  const loadItems = async () => {\n    try {\n      let res = await axios.get(url);\n      setItems(res.data);\n      setMaxPage(Math.ceil(res.data.length / 5));\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Top, {\n      \"data-testid\": \"page-title\",\n      children: \"\\uCC28\\uB7C9 \\uB9AC\\uC2A4\\uD2B8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Top2, {\n      children: \"\\uD2B9\\uAC00 \\uCC28\\uB7C9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"\\u2192\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CarouselWrapper, {\n      ref: carousel,\n      children: /*#__PURE__*/_jsxDEV(Products, {\n        items: items,\n        offset: offset,\n        type: \"specialPriceList\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Top2, {\n      children: \"\\uBAA8\\uB4E0 \\uCC28\\uB7C9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Products, {\n        items: items,\n        offset: offset,\n        type: \"allList\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      \"data-testid\": \"more-button\",\n      style: {\n        display: isVisible ? '' : 'none'\n      },\n      onClick: () => setOffset(offset => offset + 1),\n      children: \"\\uB354\\uBCF4\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CarListPage, \"TfSKTmtvmt8rG+aBoWm+bh6+R8Q=\");\n\n_c = CarListPage;\nexport default CarListPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CarListPage\");","map":{"version":3,"names":["Products","useState","useEffect","useRef","axios","Container","Top","Top2","CarouselWrapper","url","CarListPage","items","setItems","offset","setOffset","maxPage","setMaxPage","isVisible","isSetVisible","loadItems","carousel","carouselCurrentPosition","setCarouselCurrentPosition","loop","setLoop","current","style","width","carouselLoop","setTimeout","prev","clearTimeout","res","get","data","Math","ceil","length","err","alert","display"],"sources":["/Users/donghyun/Desktop/lewns2/src/pages/CarListPage/CarListPage.jsx"],"sourcesContent":["import Products from './Products';\nimport { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nimport Container from '../../components/Container';\nimport Top from '../../components/Top';\nimport Top2 from '../../components/Top2';\nimport CarouselWrapper from '../../components/CarouselWrapper';\n\nconst url = `http://localhost:8080/carClasses`;\n\nconst CarListPage = () => {\n  const [items, setItems] = useState([]);\n  const [offset, setOffset] = useState(1);\n  const [maxPage, setMaxPage] = useState(0);\n  const [isVisible, isSetVisible] = useState(true);\n\n  /* 페이지 렌더링 시, 최초 요청 */\n  useEffect(() => {\n    loadItems();\n  }, []);\n\n  /* 모든 차량 조회 시, 더보기 버튼 숨기기 */\n  useEffect(() => {\n    if (offset === maxPage) {\n      isSetVisible(false);\n    }\n  }, [offset, maxPage]);\n\n  const carousel = useRef();\n  const [carouselCurrentPosition, setCarouselCurrentPosition] = useState(0);\n  const [loop, setLoop] = useState(0);\n\n  /* 캐로셀 */\n  useEffect(() => {\n    carousel.current.style.width = `420vw`;\n    const carouselLoop = setTimeout(() => {\n      setCarouselCurrentPosition((prev) => {\n        if (prev < 6 - 1) {\n          return prev + 1;\n        } else return 0;\n      });\n    }, 2000);\n\n    setLoop(carouselLoop);\n    return clearTimeout(0);\n  }, [carouselCurrentPosition]);\n\n  const loadItems = async () => {\n    try {\n      let res = await axios.get(url);\n      setItems(res.data);\n      setMaxPage(Math.ceil(res.data.length / 5));\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  return (\n    <Container>\n      <Top data-testid=\"page-title\">차량 리스트</Top>\n\n      <Top2>특가 차량</Top2>\n      <button>&rarr;</button>\n      <CarouselWrapper ref={carousel}>\n        <Products items={items} offset={offset} type=\"specialPriceList\" />\n      </CarouselWrapper>\n\n      <Top2>모든 차량</Top2>\n      <div>\n        <Products items={items} offset={offset} type=\"allList\" />\n      </div>\n\n      <button\n        data-testid=\"more-button\"\n        style={{ display: isVisible ? '' : 'none' }}\n        onClick={() => setOffset((offset) => offset + 1)}>\n        더보기\n      </button>\n    </Container>\n  );\n};\nexport default CarListPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}